# PIPELINE AUTOMATIZADO CON TECNOLOGÍA DE CONTENEDORES PARA EL PREPROCESAMIENTO DE TASK FMRI    

## Instalación
- Clonar el repositorio en el git bash:
```
git clone https://github.com/Astolfo2332/PISIII_FSL
```
- Crear las imágenes necesarias, abrir un terminal en la ruta donde se clono con ruta en la carpeta /Docker:
```
docker-compose -f compose-build.yml build
```
Esto creara las imágenes necesarias para correr los contenedores
## Uso
- Estructurar los archivos DICOM base de la siguiente forma: 
```
raw/
├── 01/
│   ├── S/
│   │   ├── DICOM files
│   └── ...
├── 02/
│   ├── S/
│   │   ├── DICOM files
│   └── ...
└── n/
    ├── S/
    │   ├── DICOM files
    └── ...
```
Donde 01, 02, ...n puede ser cualquier nombre que se le de al paciente, y S1, S2, ... n son las pruebas realizadas.
## Carpeta /custom 
En esta carpeta se encuentran los archivos necesarios para un correcto funcionamiento del código, todas son personalizables pero no se les puede cambiar el nombre.

- Archivos JSON:
Se pueden modificar los archivos json.
- parameters.json:
Aquí se encuentran los parámetros del los estudios. Modificarlos de ser necesario para una mejor extracción u análisis
- config.json:
En este archivo se especifica los nombres y características de los estudios realizados, en formato bids para mayor información consular: [How to create a configuration file](https://unfmontreal.github.io/Dcm2Bids/docs/how-to/create-config-file/)
- dataset_description.json:
Información relevante de los datos
- participants.json y .tsv:
En el json se especifica la información de las columnas presentes en el .tsv
- Un docker-compose adicional este archivo no se debe modificar debido a que se utiliza en la mejora del proceso
## Uso después de creado el build:
- Copiar el archivo que esta al exterior 
- Cuando este creado las imágenes se copia el archivo docker-compose y la carpeta custom con las modificaciones pertinentes, en el directorio de interés con la estructura mencionada anteriormente en "Uso" y desde el terminal se ingresa:

```
 docker-compose up
``` 
## Notas:

- Es necesario correr el docker-compose up dos veces ya que la primera hará la conversión a bids y la segunda hará el preprocesamiento, también funciona para validar la estructura de los datos y hacer las correcciones necesarias en el config del bids 
## Ejemplo de la estructura de una carpeta para el estudio: 

```
├───custom
├───docker-compose.yml
└───raw
    ├───01
    │   ├───S1
    │   ├───S2
    │   ├───S3
    │   ├───S4
    │   └───S5
    └───02
        ├───S1
        ├───S2
        ├───S3
        ├───S4
        └───S5
```

##
```
      ░░░░                                                                                            ░░                                      
      ░░░░                                                                                            ░░                                      
                                                                                                                                              
                                                                                                                                              
                                                                                                                                              
                                                                                                                                              
                                                              ░░▓▓▓▓░░░░▓▓▒▒░░░░▓▓▓▓░░░░░░                                                    
                                                      ░░▒▒▓▓░░░░░░░░░░▒▒▓▓▓▓░░░░░░▓▓▒▒▒▒░░░░▓▓▓▓░░░░░░                ░░                      
                                                  ▓▓▓▓░░░░▓▓░░░░░░░░░░░░░░░░▓▓░░▒▒░░▒▒▒▒▒▒░░▓▓░░▓▓░░░░▓▓▓▓░░          ░░                      
                                            ░░▓▓▒▒▓▓▒▒▓▓██▓▓██▓▓▓▓░░░░░░░░░░▒▒▒▒░░░░░░▒▒▓▓▓▓░░░░░░░░░░░░▓▓▒▒██▓▓                              
                                          ▒▒▒▒░░▒▒▓▓▒▒██▒▒░░░░░░░░▓▓░░░░░░▒▒▒▒▒▒░░░░░░░░░░▒▒░░░░░░░░░░░░░░██▓▓▒▒▒▒▒▒                          
                                        ▒▒▒▒░░▒▒▒▒░░░░░░░░░░░░░░░░▓▓░░░░▒▒░░▓▓░░██▒▒░░░░░░▓▓▒▒▒▒▒▒░░▒▒▒▒░░░░░░░░▓▓▒▒▒▒                        
                                      ▒▒▒▒▓▓░░▓▓░░░░░░▒▒▒▒██▒▒▓▓░░░░████░░▒▒▒▒██░░░░░░▓▓████▒▒░░░░░░░░░░▒▒██▒▒░░░░██▒▒▓▓▒▒                    
                                    ░░░░██░░▓▓▓▓▓▓▓▓▒▒░░▒▒░░░░░░░░░░▒▒░░░░░░▓▓██░░░░░░░░░░██░░░░░░▒▒██▒▒░░░░░░░░░░░░░░░░▒▒▓▓                  
      ░░░░                      ░░██▒▒▓▓░░▓▓▒▒░░░░▒▒░░▓▓░░░░░░░░░░░░░░▒▒░░░░░░▒▒░░░░░░░░░░▒▒░░▒▒██▒▒░░▒▒░░░░░░▓▓▒▒▒▒▒▒░░▓▓░░▓▓                
      ░░░░                    ░░▓▓▒▒▓▓▒▒▒▒░░░░░░░░▒▒▓▓░░░░░░░░░░░░░░░░▒▒▒▒░░░░░░▓▓░░░░░░░░░░██▒▒░░░░░░▒▒░░░░░░░░░░░░▒▒▒▒░░▓▓▒▒▓▓              
                            ░░██░░▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░▓▓▓▓░░░░▒▒░░▒▒▓▓░░░░▓▓░░░░░░░░▒▒░░░░░░░░░░░░░░▓▓░░▓▓▒▒▒▒▒▒            
                            ▓▓░░▓▓▒▒▓▓░░▓▓░░░░░░░░▓▓░░░░▒▒▓▓░░░░░░░░░░░░▒▒░░░░░░░░██░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░██            
                            ▓▓▓▓░░██░░▓▓░░░░░░░░░░░░░░▓▓▒▒░░▒▒▒▒░░░░░░░░▓▓░░░░░░░░██░░░░░░░░░░░░░░▓▓▒▒▒▒░░░░░░▒▒▓▓░░░░░░░░░░░░░░░░▓▓          
                          ░░▒▒▓▓░░░░░░▒▒░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░▒▒▒▒░░░░░░░░░░▓▓▒▒░░░░▒▒▓▓░░▓▓░░░░░░░░░░▓▓▓▓░░░░░░▒▒░░        
                        ░░▓▓▓▓▒▒░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░▒▒░░░░░░▒▒░░░░░░░░░░▓▓░░░░░░░░░░░░██░░░░░░░░░░░░▓▓░░░░▓▓▒▒░░▓▓        
                        ▓▓▒▒░░▓▓▒▒░░░░░░░░░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▓▓░░░░▒▒▒▒░░░░░░▒▒░░░░░░░░░░▓▓░░░░░░▒▒▒▒▒▒        
                      ░░░░▓▓░░▒▒▒▒░░▓▓░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓░░░░░░░░▓▓░░░░░░░░░░░░░░░░░░░░▒▒░░░░      
                    ░░▓▓░░▓▓██▒▒░░░░░░░░░░░░▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░▓▓░░░░░░░░░░░░░░░░░░▓▓██░░░░░░░░░░░░░░░░▒▒░░        
                    ▓▓░░▒▒░░▓▓░░▒▒▓▓░░░░░░░░▓▓░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▓▓░░░░░░▒▒▒▒░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓░░░░      
                    ░░▒▒▒▒░░▓▓░░▒▒░░░░░░▒▒██▓▓▓▓░░░░░░░░░░░░▓▓▓▓▒▒▒▒▒▒▒▒▒▒░░▒▒░░░░▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓▒▒░░░░▓▓▓▓▒▒░░        
                  ░░░░▓▓░░░░░░░░▒▒██░░░░░░░░░░▓▓░░░░░░░░░░░░██▓▓▒▒░░░░░░▒▒▓▓▒▒██░░▒▒░░░░░░░░░░░░██░░░░░░░░░░░░▒▒▓▓░░░░▒▒░░░░▓▓  ░░░░██░░      
                  ▓▓░░▓▓░░▓▓░░░░░░░░▒▒░░░░░░░░░░▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▓▓▒▒▒▒▓▓▒▒░░░░░░▓▓░░░░░░░░▒▒▓▓░░░░░░░░░░░░░░░░▓▓░░▒▒██        
                  ▒▒░░▓▓░░▒▒░░░░░░░░▒▒▒▒░░░░░░░░░░▓▓░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒▒▒▒▒▒▒██▒▒▒▒██░░░░░░▒▒▓▓░░░░░░░░░░▓▓░░░░░░██░░▒▒▒▒        
                ░░░░▒▒▓▓░░░░░░░░░░░░▓▓░░██░░░░░░░░░░██░░░░░░░░░░░░░░░░░░▓▓▒▒░░░░░░░░▒▒▓▓░░░░░░░░░░▓▓▒▒░░▓▓░░░░░░░░░░░░▓▓░░░░░░▒▒▒▒▓▓▒▒        
                ▒▒▒▒░░▒▒░░░░░░░░░░▓▓░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░▓▓░░░░░░░░▒▒▒▒░░░░░░░░░░░░▒▒▒▒░░░░░░░░░░░░░░▓▓░░░░▓▓░░▓▓▓▓░░        
                ▒▒▒▒░░░░▒▒▓▓▓▓▓▓▓▓██░░░░░░▓▓░░░░░░░░░░▓▓░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒▒▒░░░░░░░░░░░░░░▓▓░░░░░░░░░░░░▒▒▒▒░░▓▓▓▓▓▓░░░░          
                ▒▒░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒░░░░░░░░░░░░▓▓░░░░▓▓░░░░░░██▓▓██░░░░░░░░░░██░░░░░░░░░░░░░░░░▓▓▒▒░░░░░░▓▓░░░░▒▒▓▓░░░░░░██          
                ▒▒░░░░░░░░██░░░░▒▒░░░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒▓▓▒▒░░░░░░░░▓▓░░▓▓            
                ▒▒░░▓▓░░░░▒▒░░░░▒▒░░░░░░░░░░░░██░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▓▓░░░░░░▓▓▓▓▒▒░░░░░░▒▒▒▒░░░░░░░░░░░░░░▓▓              
                ▒▒░░░░▓▓▒▒░░░░░░▒▒░░░░▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▒▒▓▓▒▒                
                ▒▒░░░░░░▓▓░░░░░░▒▒░░░░░░▒▒▓▓░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░▓▓░░░░░░░░░░░░████▓▓▓▓▓▓                      
                  ██░░░░░░▓▓░░░░░░░░░░▒▒▒▒░░░░▓▓██▓▓▒▒░░░░░░░░░░░░░░░░░░▓▓▒▒░░░░▒▒░░░░▒▒░░░░░░░░██░░░░░░░░░░▒▒░░                              
                    ██░░░░██▓▓░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▓▓░░░░▓▓▓▓░░░░░░░░░░▓▓▒▒░░░░░░░░▓▓                                
                    ▒▒░░▒▒░░▓▓▒▒░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒██░░░░░░░░▒▒░░░░░░░░▒▒▒▒                                
                      ▓▓▒▒░░░░░░▓▓██▒▒██▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░▒▒▓▓░░░░░░░░▓▓▓▓                                  
                        ██▒▒▒▒▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▓▓▒▒▒▒▒▒░░░░░░▓▓▒▒▒▒▒▒▒▒▒▒████▒▒                                    
                              ░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▓▓▒▒▓▓  ░░▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒                                  ░░░░    
                              ░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▒▒▒▒▓▓                                                        ░░░░    
                              ░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▓▓░░                                                                
                                ▓▓░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒██                                                                  
                                ░░██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▒▒▓▓░░                                                                  
                                    ▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██▓▓▒▒▓▓▒▒                                                                    
                                      ▒▒██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▓▓                                                                      
                                                  ▒▒████████▒▒▒▒▒▒▒▒██                                                                        
                    ░░░░                              ░░  ▒▒▒▒▒▒▒▒▓▓░░                                                                        
                    ░░░░                              ░░▒▒▓▓▒▒▒▒▒▒▓▓                                                                          
                                                        ▓▓▒▒▒▒▒▒▒▒                                                                            
                                                        ▓▓▒▒▒▒▓▓░░                                                                            
                                                      ▒▒▒▒▒▒▒▒▓▓                                                                              
                                                      ▒▒▓▓▓▓██                                                                                
                                                                                                                                              
                                                                                                                                              
      ░░░░                                                              ░░                            ░░                                      
      ░░░░                                                            ░░                              ░░                                      
                                                                                                                                              
                                                                                                                                              
                                                                                                                                              
                                                                                                                                              
                                                                                                                                              
                                                      ░░                                                                                      
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▒▒░░░░▒▒░░▒▒▒▒░░▒▒▒▒▒▒░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▒▒░░  ░░░░░░▒▒▓▓░░▒▒░░░░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
     

```
